<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
    <h2>Welcome, {{ session['username'] }}</h2>
    <h3>Create Room</h3>
    <form method="POST">
        <input type="text" name="room_name" placeholder="Room Name" required><br>
        <select name="room_type" id="room_type">
            <option value="public">Public</option>
            <option value="private">Private</option>
        </select><br>
        <input type="password" name="password" id="password_field" placeholder="Room Password" style="display:none;"><br>
        <button type="submit">Create Room</button>
    </form>

    <h3>Available Rooms</h3>
    <ul>
    {% for rid, r in rooms.items() %}
        <li>
            {{ r['name'] }} ({{ r['type'] }})
            {% if r['type'] == 'public' %}
                <a href="{{ url_for('game', room_id=rid) }}">Join</a>
            {% else %}
                <form action="{{ url_for('game', room_id=rid) }}" method="GET" style="display:inline;">
                    <input type="password" name="password" placeholder="Enter Password" required>
                    <button type="submit">Join</button>
                </form>
            {% endif %}
        </li>
    {% endfor %}
    </ul>
</div>

<script>
document.getElementById("room_type").addEventListener("change", function(){
    let passField = document.getElementById("password_field");
    passField.style.display = (this.value === "private") ? "block" : "none";
});
</script>
</body>
</html>
